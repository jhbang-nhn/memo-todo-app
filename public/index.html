<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>for PURIN - TODO Ïï±</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <h2>for PURIN Î°úÍ∑∏Ïù∏</h2>
            <form id="loginForm">
                <input type="text" id="username" placeholder="ÏÇ¨Ïö©ÏûêÎ™Ö" required>
                <input type="password" id="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏" required>
                <button type="submit">Î°úÍ∑∏Ïù∏</button>
            </form>
        </div>
    </div>

    <!-- Î©îÏù∏ Ïï± ÌôîÎ©¥ -->
    <div id="appScreen" class="app-screen hidden">
        <header class="header">
            <h1>for PURIN</h1>
            <button id="logoutBtn" class="logout-btn">Î°úÍ∑∏ÏïÑÏõÉ</button>
        </header>
        
        <main class="main-container">
            <!-- ÏôºÏ™Ω: Îã¨Î†• -->
            <section class="calendar-section">
                <div class="calendar-header">
                    <button id="prevMonth" class="nav-btn">&lt;</button>
                    <h2 id="currentMonth"></h2>
                    <button id="nextMonth" class="nav-btn">&gt;</button>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-weekdays">
                        <div>Ïùº</div>
                        <div>Ïõî</div>
                        <div>Ìôî</div>
                        <div>Ïàò</div>
                        <div>Î™©</div>
                        <div>Í∏à</div>
                        <div>ÌÜ†</div>
                    </div>
                    <div id="calendarDays" class="calendar-days"></div>
                </div>
                
                <!-- Ïª§Ïä§ÌÖÄ Ìú¥Ïùº Í¥ÄÎ¶¨ -->
                <div class="custom-holidays-section">
                    <div class="section-header">
                        <h4>Ïª§Ïä§ÌÖÄ Ìú¥Ïùº</h4>
                        <button id="addHolidayBtn" class="add-btn">+</button>
                    </div>
                    <div id="customHolidaysList" class="custom-holidays-list"></div>
                    <div id="addHolidayForm" class="add-form hidden">
                        <div class="form-group">
                            <label>Ìú¥Ïùº ÌÉÄÏûÖ</label>
                            <div class="holiday-type-buttons">
                                <button type="button" class="type-btn active" data-type="single">Îã®Ïùº ÎÇ†Ïßú</button>
                                <button type="button" class="type-btn" data-type="range">Î≤îÏúÑ ÏÑ†ÌÉù</button>
                            </div>
                            <input type="hidden" name="holidayType" value="single">
                        </div>
                        
                        <!-- Îã®Ïùº ÎÇ†Ïßú ÏûÖÎ†• -->
                        <div id="singleDateInput" class="date-input">
                            <div class="form-group">
                                <label for="holidayDate">ÎÇ†Ïßú</label>
                                <div class="custom-date-picker">
                                    <input type="text" id="holidayDate" placeholder="YYYY-MM-DD" readonly required onclick="showDatePicker('holidayDate')">
                                </div>
                                <div id="holidayDatePicker" class="date-picker-popup hidden">
                                    <div class="date-picker-header">
                                        <button type="button" class="date-nav-btn" onclick="changePickerMonth('holidayDate', -1)">&lt;</button>
                                        <span id="holidayDatePickerMonth"></span>
                                        <button type="button" class="date-nav-btn" onclick="changePickerMonth('holidayDate', 1)">&gt;</button>
                                    </div>
                                    <div class="date-picker-weekdays">
                                        <div>Ïùº</div><div>Ïõî</div><div>Ìôî</div><div>Ïàò</div><div>Î™©</div><div>Í∏à</div><div>ÌÜ†</div>
                                    </div>
                                    <div id="holidayDatePickerDays" class="date-picker-days"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Î≤îÏúÑ ÎÇ†Ïßú ÏûÖÎ†• -->
                        <div id="rangeDateInput" class="date-input" style="display: none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="holidayStartDate">ÏãúÏûëÏùº</label>
                                    <div class="custom-date-picker">
                                        <input type="text" id="holidayStartDate" placeholder="YYYY-MM-DD" readonly required onclick="showDatePicker('holidayStartDate')">
                                    <div id="holidayStartDatePicker" class="date-picker-popup hidden">
                                        <div class="date-picker-header">
                                            <button type="button" class="date-nav-btn" onclick="changePickerMonth('holidayStartDate', -1)">&lt;</button>
                                            <span id="holidayStartDatePickerMonth"></span>
                                            <button type="button" class="date-nav-btn" onclick="changePickerMonth('holidayStartDate', 1)">&gt;</button>
                                        </div>
                                        <div class="date-picker-weekdays">
                                            <div>Ïùº</div><div>Ïõî</div><div>Ìôî</div><div>Ïàò</div><div>Î™©</div><div>Í∏à</div><div>ÌÜ†</div>
                                        </div>
                                        <div id="holidayStartDatePickerDays" class="date-picker-days"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="holidayEndDate">Ï¢ÖÎ£åÏùº</label>
                                    <div class="custom-date-picker">
                                        <input type="text" id="holidayEndDate" placeholder="YYYY-MM-DD" readonly required onclick="showDatePicker('holidayEndDate')">
                                    </div>
                                    <div id="holidayEndDatePicker" class="date-picker-popup hidden">
                                        <div class="date-picker-header">
                                            <button type="button" class="date-nav-btn" onclick="changePickerMonth('holidayEndDate', -1)">&lt;</button>
                                            <span id="holidayEndDatePickerMonth"></span>
                                            <button type="button" class="date-nav-btn" onclick="changePickerMonth('holidayEndDate', 1)">&gt;</button>
                                        </div>
                                        <div class="date-picker-weekdays">
                                            <div>Ïùº</div><div>Ïõî</div><div>Ìôî</div><div>Ïàò</div><div>Î™©</div><div>Í∏à</div><div>ÌÜ†</div>
                                        </div>
                                        <div id="holidayEndDatePickerDays" class="date-picker-days"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="range-info">
                                <span id="rangeDuration">Í∏∞Í∞Ñ: 1Ïùº</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ÏÉâÏÉÅ</label>
                            <div class="color-picker">
                                <button type="button" class="color-btn" data-color="#ff6b6b" style="background-color: #ff6b6b;" title="Îπ®Í∞ï"></button>
                                <button type="button" class="color-btn" data-color="#4ecdc4" style="background-color: #4ecdc4;" title="Ï≤≠Î°ù"></button>
                                <button type="button" class="color-btn" data-color="#45b7d1" style="background-color: #45b7d1;" title="ÌïòÎäò"></button>
                                <button type="button" class="color-btn" data-color="#f9ca24" style="background-color: #f9ca24;" title="ÎÖ∏Îûë"></button>
                                <button type="button" class="color-btn" data-color="#a55eea" style="background-color: #a55eea;" title="Î≥¥Îùº"></button>
                                <button type="button" class="color-btn" data-color="#fd79a8" style="background-color: #fd79a8;" title="Î∂ÑÌôç"></button>
                                <button type="button" class="color-btn" data-color="#e84393" style="background-color: #e84393;" title="ÎßàÏ††ÌÉÄ"></button>
                                <button type="button" class="color-btn" data-color="#00b894" style="background-color: #00b894;" title="Ï¥àÎ°ù"></button>
                                <button type="button" class="color-btn" data-color="#d63031" style="background-color: #d63031;" title="ÏßÑÎπ®Í∞ï"></button>
                                <button type="button" class="color-btn" data-color="#636e72" style="background-color: #636e72;" title="ÌöåÏÉâ"></button>
                            </div>
                            <input type="hidden" id="holidayColor" value="#ff6b6b">
                        </div>
                        
                        <div class="form-group">
                            <label for="holidayName">Í∏∞ÎÖêÏùº Ïù¥Î¶Ñ</label>
                            <input type="text" id="holidayName" placeholder="Í∏∞ÎÖêÏùº Ïù¥Î¶Ñ" required>
                        </div>
                        
                        <div class="form-buttons">
                            <button id="saveHolidayBtn">Ï†ÄÏû•</button>
                            <button id="cancelHolidayBtn">Ï∑®ÏÜå</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ïò§Î•∏Ï™Ω: TODOÏôÄ Î©îÎ™® -->
            <section class="content-section">
                <div class="selected-date">
                    <h3 id="selectedDateTitle"></h3>
                    <div id="selectedDateHoliday" class="selected-date-holiday hidden" onclick="editSelectedDateHoliday()">
                        <div class="holiday-info">
                            <span class="holiday-color-dot"></span>
                            <span class="holiday-name"></span>
                        </div>
                    </div>
                </div>
                
                <!-- TODO ÏÑπÏÖò -->
                <div class="todo-section">
                    <div class="section-header">
                        <h4>TODO</h4>
                        <button id="addTodoBtn" class="add-btn">+</button>
                    </div>
                    <div id="todoList" class="todo-list"></div>
                    <div id="addTodoForm" class="add-form hidden">
                        <input type="text" id="todoTitle" placeholder="TODO Ï†úÎ™©">
                        <textarea id="todoDescription" placeholder="ÏÑ§Î™Ö (ÏÑ†ÌÉùÏÇ¨Ìï≠)"></textarea>
                        <div class="form-buttons">
                            <button id="saveTodoBtn">Ï†ÄÏû•</button>
                            <button id="cancelTodoBtn">Ï∑®ÏÜå</button>
                        </div>
                    </div>
                </div>

                <!-- Î©îÎ™® ÏÑπÏÖò -->
                <div class="memo-section">
                    <div class="section-header">
                        <h4>Î©îÎ™®</h4>
                        <button id="addMemoBtn" class="add-btn">+</button>
                    </div>
                    <div id="memoList" class="memo-list"></div>
                    <div id="addMemoForm" class="add-form hidden">
                        <div class="markdown-editor">
                            <div class="editor-toolbar">
                                <button type="button" class="toolbar-btn" data-action="bold" title="ÍµµÍ≤å (Ctrl+B)">B</button>
                                <button type="button" class="toolbar-btn" data-action="italic" title="Í∏∞Ïö∏ÏûÑ (Ctrl+I)">I</button>
                                <button type="button" class="toolbar-btn" data-action="code" title="ÏΩîÎìú (Ctrl+`)">`</button>
                                <button type="button" class="toolbar-btn" data-action="link" title="ÎßÅÌÅ¨">üîó</button>
                                <button type="button" class="toolbar-btn" data-action="list" title="Î™©Î°ù">‚Ä¢</button>
                                <button type="button" class="toolbar-btn" data-action="heading" title="Ï†úÎ™©">H</button>
                                <button type="button" class="toolbar-btn" data-action="quote" title="Ïù∏Ïö©">"</button>
                            </div>
                            <div class="editor-container">
                                <div class="editor-pane">
                                    <div class="pane-header">ÎßàÌÅ¨Îã§Ïö¥ Ìé∏Ïßë</div>
                                    <textarea id="memoContent" placeholder="Î©îÎ™® ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...&#10;&#10;ÎßàÌÅ¨Îã§Ïö¥ Î¨∏Î≤ï ÏßÄÏõê:&#10;‚Ä¢ **ÍµµÍ≤å** ÎòêÎäî Ctrl+B&#10;‚Ä¢ *Í∏∞Ïö∏ÏûÑ* ÎòêÎäî Ctrl+I&#10;‚Ä¢ `ÏΩîÎìú` ÎòêÎäî Ctrl+`&#10;‚Ä¢ [ÎßÅÌÅ¨](URL)&#10;‚Ä¢ - Î™©Î°ù Ìï≠Î™©&#10;‚Ä¢ # Ï†úÎ™©&#10;‚Ä¢ > Ïù∏Ïö©Î¨∏"></textarea>
                                </div>
                                <div class="editor-pane">
                                    <div class="pane-header">ÎØ∏Î¶¨Î≥¥Í∏∞</div>
                                    <div id="memoPreview" class="markdown-preview"></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-buttons">
                            <button id="saveMemoBtn">Ï†ÄÏû•</button>
                            <button id="cancelMemoBtn">Ï∑®ÏÜå</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ÏàòÏ†ï Î™®Îã¨ -->
    <div id="editModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">ÏàòÏ†ï</h3>
                <button id="closeModal" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <!-- TODO ÏàòÏ†ï Ìèº -->
                <div id="editTodoForm" class="edit-form hidden">
                    <div class="form-group">
                        <label for="editTodoTitle">Ï†úÎ™©</label>
                        <input type="text" id="editTodoTitle" placeholder="TODO Ï†úÎ™©">
                    </div>
                    <div class="form-group">
                        <label for="editTodoDescription">ÏÑ§Î™Ö</label>
                        <textarea id="editTodoDescription" placeholder="ÏÑ§Î™Ö (ÏÑ†ÌÉùÏÇ¨Ìï≠)"></textarea>
                    </div>
                </div>
                
                <!-- Î©îÎ™® ÏàòÏ†ï Ìèº -->
                <div id="editMemoForm" class="edit-form hidden">
                    <div class="form-group">
                        <label for="editMemoContent">ÎÇ¥Ïö©</label>
                        <div class="markdown-editor">
                            <div class="editor-toolbar">
                                <button type="button" class="toolbar-btn" data-action="bold" title="ÍµµÍ≤å (Ctrl+B)">B</button>
                                <button type="button" class="toolbar-btn" data-action="italic" title="Í∏∞Ïö∏ÏûÑ (Ctrl+I)">I</button>
                                <button type="button" class="toolbar-btn" data-action="code" title="ÏΩîÎìú (Ctrl+`)">`</button>
                                <button type="button" class="toolbar-btn" data-action="link" title="ÎßÅÌÅ¨">üîó</button>
                                <button type="button" class="toolbar-btn" data-action="list" title="Î™©Î°ù">‚Ä¢</button>
                                <button type="button" class="toolbar-btn" data-action="heading" title="Ï†úÎ™©">H</button>
                                <button type="button" class="toolbar-btn" data-action="quote" title="Ïù∏Ïö©">"</button>
                            </div>
                            <div class="editor-container">
                                <div class="editor-pane">
                                    <div class="pane-header">ÎßàÌÅ¨Îã§Ïö¥ Ìé∏Ïßë</div>
                                    <textarea id="editMemoContent" placeholder="Î©îÎ™® ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...&#10;&#10;ÎßàÌÅ¨Îã§Ïö¥ Î¨∏Î≤ï ÏßÄÏõê:&#10;‚Ä¢ **ÍµµÍ≤å** ÎòêÎäî Ctrl+B&#10;‚Ä¢ *Í∏∞Ïö∏ÏûÑ* ÎòêÎäî Ctrl+I&#10;‚Ä¢ `ÏΩîÎìú` ÎòêÎäî Ctrl+`&#10;‚Ä¢ [ÎßÅÌÅ¨](URL)&#10;‚Ä¢ - Î™©Î°ù Ìï≠Î™©&#10;‚Ä¢ # Ï†úÎ™©&#10;‚Ä¢ > Ïù∏Ïö©Î¨∏"></textarea>
                                </div>
                                <div class="editor-pane">
                                    <div class="pane-header">ÎØ∏Î¶¨Î≥¥Í∏∞</div>
                                    <div id="editMemoPreview" class="markdown-preview"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveEditBtn" class="save-btn">Ï†ÄÏû•</button>
                <button id="cancelEditBtn" class="cancel-btn">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <script src="constants.js"></script>
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
